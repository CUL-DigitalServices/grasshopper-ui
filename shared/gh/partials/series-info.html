<%
    var numEvents = 0;
    _.each(_.map(data.terms, function(term) {
        if (term.events) {
            return term.events.length;
        }
    }), function(termEvents) {
        numEvents += termEvents;
    });
%>

<!-- Series -->
<div class="gh-series-info-list">
    <% if (numEvents) { %>
        <% _.each(data.terms, function(term) { %>
            <% if (term.events && term.events.length) { %>
                <div class="gh-series-info-list-term">
                    <!-- Term -->
                    <strong><%- term.label %></strong>

                    <!-- Event -->
                    <% _.each(term.events, function(event) { %>
                        <div class="gh-series-info-list-event">

                            <!-- Event type -->
                            <div class="gh-event-type gh-series-info-list-event-type" data-type="<%- event.type %>" data-first="<% if (event.type) { %><%- event.type.substr(0,1) %><% } %>" title="<%- event.type %>"><% if (event.type) { %><span style="visibility: hidden;"><%- event.type %></span><% } %></div>

                            <!-- Event date -->
                            <div class="gh-series-info-list-event-date">
                                <%= _.partial('admin-edit-date-field', {'data': event, 'utils': data.utils}) %>
                            </div>
                        </div>
                    <%}); %>
                </div>
            <% } %>
        <% }); %>
    <% } else { %>
        <div class="gh-series-info-list-no-events">No events</div>
    <% } %>
</div>

<!-- Organisers -->
<% if (data.organisers && data.organisers.length) { %>
    <div class="gh-series-info-organiser"><%- data.organisers.join(', ') %></div>
<% } %>

<!-- Locations -->
<% if (data.locations && data.locations.length) { %>
    <div class="gh-series-info-location"><%- data.locations.join(', ') %></div>
<% } %>
