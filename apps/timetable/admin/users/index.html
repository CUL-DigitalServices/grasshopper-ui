<html>
    <head>
        <title>Timetable Administration</title>

        <meta name="viewport" content="width=device-width" initial-scale="1.0">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
        <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
        <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
        <link rel="manifest" href="/manifest.json">
        <meta name="msapplication-TileColor" content="#FFC40D">
        <meta name="msapplication-TileImage" content="/mstile-144x144.png">
        <meta name="theme-color" content="#FFFFFF">

        <!-- .cam.ac.uk domain Typekit inclusion -->
        <script type="text/javascript" src="//use.typekit.com/hyb5bko.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

        <link rel="stylesheet" href="/shared/vendor/css/font-awesome.css">
        <link rel="stylesheet" href="/shared/vendor/css/bootstrap.css">
        <link rel="stylesheet" href="/shared/vendor/css/chosen.css">
        <link rel="stylesheet" href="/shared/vendor/css/jquery.autosuggest.css">
        <link rel="stylesheet" href="/shared/vendor/css/fullcalendar.css">
        <link rel="stylesheet" href="/shared/gh/css/gh.base.css">
        <link rel="stylesheet" href="/shared/gh/css/gh.components.css">
        <link rel="stylesheet" href="/shared/gh/css/gh.skin.css">
        <link rel="stylesheet" href="/apps/admin/ui/css/admin.css">
        <link rel="stylesheet" href="/apps/timetable/admin/ui/css/admin.css">
        <link rel="stylesheet" href="/apps/timetable/admin/ui/css/skin.css">
        <link rel='stylesheet' href="/shared/gh/css/gh.print.css" media="print">
    </head>
    <body class="gh-admin gh-preload">
        <div id="gh-page-container">
            <div id="gh-left-container">
                <div id="gh-meta-container">
                    <a href="javascript:;" id="gh-header-logo" title="Visit the administration area">
                        <img src="/shared/gh/img/unilogo.png" alt="Cambridge University">
                    </a>
                    <div id="gh-content-description">
                        <p class="gh-academic-year-select">Manage users in the app</p>
                    </div>
                </div>
                <div id="gh-modules-container"><!-- --></div>
            </div>
            <div id="gh-right-container">
                <div id="gh-header-container">
                    <div id="gh-header"><!-- --></div>
                    <div id="gh-subheader"><!-- --></div>
                </div>
                <main id="gh-main">
                    <h1>User management</h1>
                    <p>Search for a user to manage permissions for</p>
                    <input type="text" id="gh-user-management-search" placeholder="Search user">
                    <div id="gh-user-management-tripos-structure-container"><!-- --></div>
                </main>
            </div>
            <div class="clearfix"></div>
        </div>
        <div id="gh-modal"><!-- --></div>

        <!-- Header template -->
        <script id="gh-header-template" type="text/template">
            <%= _.partial('admin-header-template', {'data': data}) %>
        </script>

        <!-- Login template -->
        <script id="gh-login-template" type="text/template">
            <div id="gh-login-form" class="col-xs-6 pull-left">
                <form class="gh-signin-form" role="form" data-toggle="validator">
                    <h2>Sign in</h2>
                    <div class="form-group">
                        <label for="gh-signin-email">Email address</label>
                        <input type="username" name="username" class="form-control" id="gh-signin-email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="gh-signin-password">Password</label>
                        <input type="password" name="password" class="form-control" id="gh-signin-password" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" id="gh-signin" class="btn btn-default gh-btn-primary">
                        <i class="fa fa-sign-in"></i>Sign in
                    </button>
                </form>
            </div>
        </script>

        <script id="gh-user-management-tripos-structure-template" type="text/template">
            <form id="gh-user-management-part-access-form">
                <ul>
                    <!-- // Loop over all courses and render the parent level course -->
                    <% _.each(triposData.courses, function(course) { %>
                        <li>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox"> <%- course.displayName %>
                                </label>
                            </div>
                            <!-- // Get all subjects belonging to this course -->
                            <% var courseSubjects = _.filter(triposData.subjects, function(subject) {return subject.ParentId === course.id;}); %>

                            <!-- // If there are subjects, render the parts as children of subject -->
                            <% if (courseSubjects.length) { %>
                                <ul>
                                    <% _.each(courseSubjects, function(subject) { %>
                                        <li>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox"> <%- subject.displayName %>
                                                </label>
                                            </div>
                                            <% var subjectParts = _.filter(triposData.parts, function(part) {return part.ParentId === subject.id;}); %>
                                            <ul>
                                                <% _.each(subjectParts, function(part) { %>
                                                    <li>
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" <% if (part.canManage) { %>checked<% } %> data-original="<%- part.canManage || false %>" data-groupid="<%- part.Group.id %>"> <%- part.displayName %>
                                                            </label>
                                                        </div>
                                                    </li>
                                                <% });%>
                                            </ul>
                                        </li>
                                    <% }); %>
                                </ul>
                            <!-- // If there are NO subjects, render the parts as children of the course -->
                            <% } else { %>
                                <% var courseParts = _.filter(triposData.parts, function(part) {return part.ParentId === course.id;}); %>
                                <ul>
                                    <% _.each(courseParts, function(part) { %>
                                        <li>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" <% if (part.canManage) { %>checked<% } %> data-original="<%- part.canManage || false %>" data-groupid="<%- part.Group.id %>"> <%- part.displayName %>
                                                </label>
                                            </div>
                                        </li>
                                    <% });%>
                                </ul>
                            <% } %>
                        </li>
                    <% }); %>
                </ul>
                <button type="submit" class="btn btn-default">Submit</button>
            </form>
        </script>


        <!-- Users template -->

        <script data-main="/shared/gh/js/gh.bootstrap.js" data-loadmodule="/apps/timetable/admin/users/js/index.js" src="/shared/vendor/js/require-jquery.js"></script>
    </body>
</html>
