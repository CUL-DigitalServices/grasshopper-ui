<VirtualHost <%= apacheConf.admin.ip %>:80>


    # ----------------------------------------------------------------------
    # General Host Settings
    # ----------------------------------------------------------------------

    ServerAdmin admin@grasshopper.com
    DocumentRoot <%= apacheConf.admin.documentRoot %>
    ServerName <%= apacheConf.admin.hostname %>
    ServerAlias <%= apacheConf.admin.hostname %>

    ErrorLog <%= apacheConf.admin.errorLog %>
    CustomLog <%= apacheConf.admin.customLog %> common


    # ----------------------------------------------------------------------
    # ProxyPass Directives
    # ----------------------------------------------------------------------

    #Â Proxy api calls to the application server
    ProxyPass /api http://localhost:2000/api retry=0
    ProxyPassReverse /api http://localhost:2000/api
    ProxyPreserveHost On


    # ----------------------------------------------------------------------
    # General Directives
    # ----------------------------------------------------------------------

    # Shared files
    Alias /shared <%= apacheConf.admin.shared %>

    # API docs
    Alias /docs <%= apacheConf.docs %>

    # App files
    Alias /apps <%= apacheConf.admin.apps %>

    # Configuration
    Alias /configuration <%= apacheConf.admin.documentRoot %>

    # Tenants
    Alias /tenants <%= apacheConf.admin.documentRoot %>

    # Users
    Alias /users <%= apacheConf.admin.documentRoot %>

    # QUnit tests
    Alias /qunit <%= apacheConf.admin.tests %>/qunit
    <Directory <%= apacheConf.admin.tests %>/qunit>
        Options Indexes FollowSymLinks
        Order Allow,Deny
        Allow from All

        RewriteEngine On
        RewriteBase /qunit
        RewriteRule ^api\.(.*)$ <%= apacheConf.admin.tests %>/qunit/tests/api.$1.html
    </Directory>

    RewriteEngine On
    RewriteRule ^/notfound$     <%= apacheConf.admin.shared %>/gh/errors/404.html
    RewriteRule ^/unavailable$  <%= apacheConf.admin.shared %>/gh/errors/503.html


    # ----------------------------------------------------------------------
    # Error Documents
    # ----------------------------------------------------------------------

    ErrorDocument 401 /shared/gh/errors/401.html
    ErrorDocument 404 /shared/gh/errors/404.html
    ErrorDocument 503 /shared/gh/errors/503.html

</VirtualHost>
